# CGMiner-RS é…ç½®æ–‡ä»¶ - è½¯ç®—æ³•æ ¸å¿ƒé»˜è®¤é…ç½®
# è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ: docs/configuration.md
#
# æœ¬é…ç½®æ–‡ä»¶é»˜è®¤ä½¿ç”¨è½¯ç®—æ³•æ ¸å¿ƒ (Software Core)
# è½¯ç®—æ³•æ ¸å¿ƒç‰¹ç‚¹:
# - ä½¿ç”¨çœŸå®çš„SHA256ç®—æ³•è¿›è¡ŒCPUæŒ–çŸ¿è®¡ç®—
# - äº§ç”ŸçœŸå®å¯ç”¨çš„æŒ–çŸ¿æ•°æ®å’Œä»½é¢ï¼Œå¯æäº¤åˆ°çœŸå®çŸ¿æ± 
# - é€‚åˆMacç¯å¢ƒã€å¼€å‘æµ‹è¯•å’Œä½åŠŸè€—æŒ–çŸ¿åœºæ™¯
# - æ”¯æŒå¤šè®¾å¤‡å¹¶è¡ŒæŒ–çŸ¿ï¼Œæé«˜CPUåˆ©ç”¨ç‡
# - ä¸F2Poolç­‰ä¸»æµçŸ¿æ± å®Œå…¨å…¼å®¹
#
# å¦‚éœ€ä½¿ç”¨ASICç¡¬ä»¶ï¼Œè¯·:
# 1. å°† cores.enabled_cores æ”¹ä¸º ["asic"]
# 2. å°† cores.default_core æ”¹ä¸º "asic"
# 3. å¯ç”¨ cores.asic_core.enabled = true
# 4. é…ç½®ç›¸åº”çš„ASICç¡¬ä»¶å‚æ•°

[general]
# æ—¥å¿—çº§åˆ«: trace, debug, info, warn, error
log_level = "info"

# æ—¥å¿—æ–‡ä»¶è·¯å¾„ (å¯é€‰)
log_file = "/var/log/cgminer-rs/cgminer.log"

# PID æ–‡ä»¶è·¯å¾„ (å¯é€‰)
pid_file = "/var/run/cgminer-rs.pid"

# å·¥ä½œé‡å¯è¶…æ—¶æ—¶é—´ (ç§’)
work_restart_timeout = 60

# æ‰«ææ—¶é—´é—´éš” (ç§’)
scan_time = 30

# =============================================================================
# æ ¸å¿ƒé…ç½® (é‡å‘½ååçš„æ ¸å¿ƒåº“)
# =============================================================================
[cores]
# å¯ç”¨çš„æ ¸å¿ƒåˆ—è¡¨ - ä½¿ç”¨é‡å‘½ååçš„æ ¸å¿ƒåç§°
# å¯é€‰å€¼: ["btc-software", "maijie-l7"] æˆ– ["btc-software"] æˆ– ["maijie-l7"]
enabled_cores = ["btc-software"]

# é»˜è®¤æ ¸å¿ƒ - Bitcoinè½¯ç®—æ³•æ ¸å¿ƒ (cgminer-s-btc-core)
# è½¯ç®—æ³•æ ¸å¿ƒä½¿ç”¨CPUè¿›è¡ŒçœŸå®çš„æ¯”ç‰¹å¸æŒ–çŸ¿è®¡ç®—ï¼Œäº§ç”Ÿå¯ç”¨çš„æŒ–çŸ¿æ•°æ®
default_core = "btc-software"

# Bitcoinè½¯ç®—æ³•æ ¸å¿ƒé…ç½® (cgminer-s-btc-core)
# Bitcoinè½¯ç®—æ³•æ ¸å¿ƒç‰¹ç‚¹:
# - ä½¿ç”¨çœŸå®çš„SHA256ç®—æ³•è¿›è¡ŒCPUæŒ–çŸ¿
# - äº§ç”ŸçœŸå®å¯ç”¨çš„æŒ–çŸ¿æ•°æ®å’Œä»½é¢
# - é€‚åˆMacç¯å¢ƒå’Œå¼€å‘æµ‹è¯•
# - æ”¯æŒå¤šè®¾å¤‡å¹¶è¡ŒæŒ–çŸ¿
# - æ”¯æŒCPUç»‘å®šï¼Œé¿å…çº¿ç¨‹åˆ‡æ¢æå‡æ€§èƒ½
[cores.btc_software]
enabled = true
# ğŸ¯ CPUä½¿ç”¨ç‡ä¼˜åŒ–é…ç½® - ç›®æ ‡80%CPUä½¿ç”¨ç‡
# è®¾å¤‡æ•°é‡ = CPUé€»è¾‘æ ¸å¿ƒæ•° * 0.8 (80%ä½¿ç”¨ç‡)
# å¯¹äº8æ ¸16çº¿ç¨‹ç³»ç»Ÿ: 16 * 0.8 = 12-13ä¸ªè®¾å¤‡
# å¯¹äº4æ ¸8çº¿ç¨‹ç³»ç»Ÿ: 8 * 0.8 = 6-7ä¸ªè®¾å¤‡
# å»ºè®®æ ¹æ®å®é™…CPUæ ¸å¿ƒæ•°è°ƒæ•´ï¼Œå…¬å¼: CPUé€»è¾‘æ ¸å¿ƒæ•° * 0.8
device_count = 64            # ä¼˜åŒ–è®¾å¤‡æ•°é‡ä»¥è¾¾åˆ°80%CPUä½¿ç”¨ç‡
min_hashrate = 3000000000.0  # æœ€å°ç®—åŠ›: 1.5 GH/s (é€‚ä¸­é…ç½®)
max_hashrate = 12000000000.0  # æœ€å¤§ç®—åŠ›: 4 GH/s (å¹³è¡¡æ€§èƒ½ä¸ç¨³å®šæ€§)
error_rate = 0.001           # é”™è¯¯ç‡: 0.1% (æ›´ä½é”™è¯¯ç‡æå‡æ•ˆç‡)
batch_size = 15000            # å¢å¤§æ‰¹å¤„ç†å¤§å°æé«˜CPUåˆ©ç”¨ç‡
work_timeout_ms = 1500       # å‡å°‘å·¥ä½œè¶…æ—¶æé«˜å“åº”é€Ÿåº¦
# æ€§èƒ½ä¼˜åŒ–å‚æ•°
thread_priority = "high"     # çº¿ç¨‹ä¼˜å…ˆçº§: "normal", "high", "realtime"
cpu_intensive_mode = true    # å¯ç”¨CPUå¯†é›†æ¨¡å¼ï¼Œæœ€å¤§åŒ–CPUä½¿ç”¨
# Mac M4 ä¼˜åŒ–é…ç½®
enable_cpu_affinity = false  # macOSé™åˆ¶CPUç»‘å®š

# CPUç»‘å®šé…ç½® - æ™ºèƒ½CPUåˆ†é…ç­–ç•¥
[cores.btc_software.cpu_affinity]
enabled = true               # å¯ç”¨CPUç»‘å®š
strategy = "intelligent"     # æ™ºèƒ½CPUç»‘å®šç­–ç•¥ï¼Œè‡ªåŠ¨ä¼˜åŒ–åˆ†é…
avoid_hyperthreading = false # ä½¿ç”¨è¶…çº¿ç¨‹æé«˜å¹¶å‘æ€§èƒ½
prefer_performance_cores = true # ä¼˜å…ˆä½¿ç”¨æ€§èƒ½æ ¸å¿ƒ(é€‚ç”¨äºå¤§å°æ ¸æ¶æ„)
# é«˜çº§CPUä¼˜åŒ–é€‰é¡¹
load_balancing = true        # å¯ç”¨è´Ÿè½½å‡è¡¡
cpu_usage_target = 0.8       # ç›®æ ‡CPUä½¿ç”¨ç‡ 80%
# manual_mapping = { 0 = 0, 1 = 1, 2 = 2, 3 = 3 }  # æ‰‹åŠ¨æ˜ å°„ (ä»…åœ¨strategy="manual"æ—¶ä½¿ç”¨)

# Maijie L7 ASICæ ¸å¿ƒé…ç½® (cgminer-a-maijie-l7-core)
# æ³¨æ„: åœ¨Macç¯å¢ƒä¸‹é€šå¸¸ä¸å¯ç”¨ï¼Œä¸»è¦ç”¨äºLinuxç¯å¢ƒçš„Maijie L7è®¾å¤‡
[cores.maijie_l7]
enabled = false              # é»˜è®¤ç¦ç”¨ASICæ ¸å¿ƒ
chain_count = 3
spi_speed = 6000000          # 6MHz
uart_baud = 115200
auto_detect = true
power_limit = 3000.0         # 3kW
cooling_mode = "auto"

# =============================================================================
# è®¾å¤‡é…ç½® (è½¯ç®—æ³•æ ¸å¿ƒè®¾å¤‡é…ç½®)
# =============================================================================
[devices]
# è‡ªåŠ¨æ£€æµ‹è®¾å¤‡ - è½¯ç®—æ³•æ ¸å¿ƒä¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿè®¾å¤‡
auto_detect = true
# è®¾å¤‡æ‰«æé—´éš” (ç§’) - è½¯ç®—æ³•è®¾å¤‡æ‰«æé¢‘ç‡
scan_interval = 10

# è½¯ç®—æ³•è®¾å¤‡é“¾é…ç½® (è™šæ‹Ÿé“¾ï¼Œç”¨äºæ¨¡æ‹ŸASICé“¾ç»“æ„)
# æ³¨æ„: è½¯ç®—æ³•æ ¸å¿ƒä¼šæ ¹æ®device_countè‡ªåŠ¨åˆ›å»ºè®¾å¤‡
# ä»¥ä¸‹é…ç½®ä¸»è¦ç”¨äºå…¼å®¹æ€§ï¼Œå®é™…å‚æ•°ç”±è½¯ç®—æ³•æ ¸å¿ƒç®¡ç†
[[devices.chains]]
id = 0
enabled = true
frequency = 1000             # è™šæ‹Ÿé¢‘ç‡ (MHz) - å½±å“ç®—åŠ›è®¡ç®—
voltage = 900                # è™šæ‹Ÿç”µå‹ (mV) - ç”¨äºåŠŸè€—ä¼°ç®—
auto_tune = false            # è½¯ç®—æ³•æ ¸å¿ƒä¸æ”¯æŒè‡ªåŠ¨è°ƒé¢‘
chip_count = 1               # æ¯ä¸ªè½¯ç®—æ³•è®¾å¤‡ç›¸å½“äº1ä¸ªè™šæ‹ŸèŠ¯ç‰‡

[[devices.chains]]
id = 1
enabled = true
frequency = 1000
voltage = 900
auto_tune = false
chip_count = 1

# =============================================================================
# çŸ¿æ± é…ç½®
# =============================================================================
[pools]
# çŸ¿æ± ç­–ç•¥: Failover, RoundRobin, LoadBalance, Quota
strategy = "Failover"

# æ•…éšœè½¬ç§»è¶…æ—¶æ—¶é—´ (ç§’)
failover_timeout = 30

# é‡è¯•é—´éš” (ç§’)
retry_interval = 10

# çŸ¿æ± åˆ—è¡¨ - F2Pool é…ç½® (é€‚é…è½¯ç®—æ³•æ ¸å¿ƒ)
# F2Poolæ”¯æŒè½¯ç®—æ³•æ ¸å¿ƒäº§ç”Ÿçš„çœŸå®ä»½é¢æäº¤
[[pools.pools]]
url = "stratum+tcp://192.168.18.240:10203"
user = "kayuii.bbt"
password = "21235365876986800"
priority = 1
enabled = true

[[pools.pools]]
url = "stratum+tcp://btc-asia.f2pool.com:1314"
user = "kayuii.bbt"
password = "21235365876986800"
priority = 2
enabled = false

[[pools.pools]]
url = "stratum+tcp://btc-euro.f2pool.com:1314"
user = "kayuii.bbt"
password = "21235365876986800"
priority = 3
enabled = false

[api]
# å¯ç”¨ API æœåŠ¡å™¨
enabled = true

# ç»‘å®šåœ°å€
bind_address = "127.0.0.1"

# API ç«¯å£
port = 4028

# å…è®¸çš„æ¥æº (CORS)
allow_origins = ["*"]

# è®¤è¯ä»¤ç‰Œ (å¯é€‰ï¼Œç”¨äº API å®‰å…¨)
# auth_token = "your-secret-token-here"

[monitoring]
# å¯ç”¨ç›‘æ§ç³»ç»Ÿ
enabled = true

# æŒ‡æ ‡æ”¶é›†é—´éš” (ç§’)
metrics_interval = 30

# Webç›‘æ§ç«¯å£ (å¯é€‰) - æ›¿ä»£Prometheusçš„è½»é‡çº§ç›‘æ§
web_port = 8080

# å‘Šè­¦é˜ˆå€¼é…ç½®
[monitoring.alert_thresholds]
# æ¸©åº¦å‘Šè­¦é˜ˆå€¼ (Â°C)
temperature_warning = 80.0
temperature_critical = 90.0

# ç®—åŠ›ä¸‹é™å‘Šè­¦é˜ˆå€¼ (ç™¾åˆ†æ¯”)
hashrate_drop_percent = 20.0

# é”™è¯¯ç‡å‘Šè­¦é˜ˆå€¼ (ç™¾åˆ†æ¯”)
error_rate_percent = 5.0

# å…¶ä»–é˜ˆå€¼
max_temperature = 85.0
max_cpu_usage = 80.0
max_memory_usage = 90.0
max_device_temperature = 85.0
max_error_rate = 5.0
min_hashrate = 1.5  # è°ƒæ•´ä¸º1.5 GH/sï¼Œé€‚åˆè½¯ç®—æ³•æ ¸å¿ƒçš„å®é™…æ€§èƒ½

# =============================================================================
# =============================================================================
# Webç›‘æ§ç•Œé¢é…ç½® (è½»é‡çº§ç›‘æ§æ›¿ä»£Prometheus)
# =============================================================================
[web]
# å¯ç”¨Webç›‘æ§ç•Œé¢
enabled = true

# ç»‘å®šåœ°å€
bind_address = "127.0.0.1"

# Webç›‘æ§ç«¯å£
port = 8080

# é™æ€æ–‡ä»¶è·¯å¾„ (å¯é€‰)
static_path = "web/static"

# =============================================================================
# ç®—åŠ›è®¡é‡å™¨é…ç½® (å®šæœŸç®—åŠ›è¾“å‡º)
# =============================================================================
[hashmeter]
# å¯ç”¨ç®—åŠ›è®¡é‡å™¨ - æä¾›ç±»ä¼¼ä¼ ç»Ÿcgminerçš„å®šæœŸç®—åŠ›è¾“å‡º
enabled = true

# ç®—åŠ›è¾“å‡ºé—´éš” (ç§’) - æ¯30ç§’è¾“å‡ºä¸€æ¬¡ç®—åŠ›ç»Ÿè®¡
log_interval = 30

# å¯ç”¨è®¾å¤‡çº§åˆ«ç»Ÿè®¡ - æ˜¾ç¤ºæ¯ä¸ªè®¾å¤‡çš„è¯¦ç»†ç®—åŠ›ä¿¡æ¯
per_device_stats = true

# å¯ç”¨æ§åˆ¶å°è¾“å‡º - åœ¨æ§åˆ¶å°æ˜¾ç¤ºç®—åŠ›ä¿¡æ¯
console_output = true

# å¯ç”¨ç¾åŒ–è¾“å‡º - ä½¿ç”¨emojiå’Œé¢œè‰²ï¼Œç¬¦åˆCGMiner-RSçš„ç¾åŒ–æ—¥å¿—é£æ ¼
beautiful_output = true
